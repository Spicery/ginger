
CC=g++

CXXFLAGS=-g -I../hpp -I../../libgng/hpp -L/opt/local/lib -L../cpp -I/opt/local/include -I../../automatic/machine -I../../automatic/sys -I../../automatic/simple -Wall -Wnon-virtual-dtor
CFLAGS=-Wmissing-prototypes 
LDFLAGS=-ldl -lboost_iostreams
OBJS=example.o testrunner.o gctest.o gcstats.o archtest.o simplekeytest.o constants.o

all: testrunner

check: testrunner
	./testrunner 2> results.xml 

# $@ is make shorthand for the target.
# $@ is make shorthand for the dependencies
testrunner: $(OBJS) ../cpp/libappginger.a
	g++ $(CXXFLAGS) $(BOOST_CPPFLAGS) -o $@ $^ ../../libgng/cpp/libgng.a  -lcppunit -lappginger $(LDFLAGS) /usr/local/lib/librudecgi.a

clean:
	rm -f *.o
	rm -f testrunner
	rm -f *.a
	rm -f results.xml
