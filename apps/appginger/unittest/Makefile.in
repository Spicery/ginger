
CC=@CXX@

CXXFLAGS=-g -std=c++11 -I../hpp -I../../libgng/hpp -I../../automatic/machine -I../../automatic/sys -I../../automatic/simple `cppunit-config --cflags` -Wall -Wnon-virtual-dtor
CFLAGS=-Wmissing-prototypes 
LDFLAGS=`cppunit-config --libs` 
OBJS=example.o testrunner.o archtest.o simplekeytest.o constants.o
### Disabling a test that has suffered bitrot!
### gctest.o gcstats.o 


all: testrunner

unitcheck:
	./testrunner 2> results.xml 

# $@ is make shorthand for the target.
# $@ is make shorthand for the dependencies
testrunner: $(OBJS) ../cpp/libappginger.a
	$(CC) $(CXXFLAGS) -o $@ $^ ../../libgng/cpp/libgng.a $(LDFLAGS) /usr/local/lib/librudecgi.a -L../cpp -lappginger 

clean:
	rm -f *.o
	rm -f testrunner
	rm -f *.a
	rm -f results.xml
